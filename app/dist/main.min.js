!function(){angular.module("ys.icebreaker",["angular-storage","firebase","googleplus","ngMaterial","ngSanitize","ui.router"])}(),function(e){"use strict";e.module("ys.icebreaker").run(["firebaseService",function(e){e.setBaseUrl("https://ys-culture-code.firebaseio.com/")}])}(angular),function(e){"use strict";e.module("ys.icebreaker").config(["GooglePlusProvider",function(e){e.init({clientId:"603865153070-bprrivjg6tcucau5uleg4jstnea0l7qv.apps.googleusercontent.com",apiKey:"AIzaSyB1F4lzMptFVnxoLYqhTTvN8eBfnscoeLI"})}])}(angular),function(e,r){"use strict";e.module("ys.icebreaker").run(["$http","$log","$mdDialog","icebreakerService","store",function(e,r,t,i,a){i.initIcebreaker().then(function(){r.info("initialization completed!")})}])}(angular,document),function(){"use strict";angular.module("ys.icebreaker").config(["$stateProvider","$urlRouterProvider",function(e,r){r.otherwise("/game"),e.state("game",{url:"/game",template:"<ys-icebreaker-game></ys-icebreaker-game>",controller:"icebreakerGameController"}),e.state("list",{url:"/list",templateUrl:"templates/icebreakerList.html",controller:"icebreakerListController"})}])}(),function(e){"use strict";var r=function(e,r,t,i){t.array("Icebreakers");r.add=function(){i.addIcebreaker(r.icebreaker).then(function(){e.hide()})},r.cancel=function(){e.cancel()}};r.$inject=["$mdDialog","$scope","firebaseService","icebreakerService"],e.module("ys.icebreaker").controller("addIcebreakerController",r)}(angular),function(e,r){"use strict";var t=function(e,r,t,i,a){function n(){i.$broadcast("reset"),a.reset()}i.$on("gameover",function(e){}),i.$on("reset",function(e){var t=r.simple({textContent:"The game was successfully reset.",position:"top right",action:"Dismiss"});r.show(t)}),i.play=function(){var e=a.getRandomIcebreaker();i.icebreaker=e},i.reset=function(r){var t=a.getIcebreakers();if(t.length>0){var i=e.confirm().title("Reset the game?").textContent("There is/are ("+t.length+") question(s) left. Reset?").ariaLabel("Confirm").targetEvent(r).ok("Yes").cancel("No");e.show(i).then(function(){n()},function(){})}else n()}};t.$inject=["$mdDialog","$mdToast","$log","$scope","icebreakerService"],e.module("ys.icebreaker").controller("icebreakerGameController",t)}(angular,$),function(e,r){"use strict";var t=function(e,r,t,i,a,n,o,s){function c(){var e=a.array("Icebreakers");e.$loaded().then(function(){i.firebaseIcebreakers=e}),i.icebreakers=o.getIcebreakers()}c(),i.user=s.get("user"),i.login=function(){n.login().then(function(e){n.getUser().then(function(e){i.user=e.email||e.name,s.set("user",i.user)})},function(e){})},i.submit=function(){o.addIcebreaker(i.question).then(function(){var e=t.simple({textContent:"The icebreaker was successfully added.",position:"bottom right",action:"Dismiss"});t.show(e)})},i.delete=function(e){var r=e.$id;o.removeIcebreaker(r).then(function(){var e=t.simple({textContent:"The icebreaker was successfully deleted.",position:"bottom right",action:"Dismiss"});t.show(e)})},i.deleteLocal=function(e){o.removeIcebreakerLocal(e),i.icebreakers=o.getIcebreakers()}};t.$inject=["$log","$mdDialog","$mdToast","$scope","firebaseService","GooglePlus","icebreakerService","store"],e.module("ys.icebreaker").controller("icebreakerListController",t)}(angular,document),function(e){var r=e.module("ys.icebreaker"),t=function(){return{replace:!1,restrict:"E",template:'<div id="side-controls" class="right-align"><a class="btn-floating ys" ng-click="reset($event)"><i class="fa fa-repeat"></i><md-tooltip md-direction="top">Reset</md-tooltip></a><a class="btn-floating ys" ui-sref="list"><i class="fa fa-list-alt"></i><md-tooltip md-direction="top">List</md-tooltip></a><a class="btn-floating ys" ng-href="http://github.com/amcpanaligan/ys.icebreaker" target="_blank"><i class="fa fa-github"></i><md-tooltip md-direction="top">Github</md-tooltip></a></div><div class="container center-align"><div class="row"><div class="col s12 m12"><button class="waves-effect waves-light btn-large ys" ng-click="play()">Play</button><div class="card-panel ys" ng-show="icebreaker"><h2 class="white-text" ng-bind="icebreaker.icebreaker"></h2></div></div></div></div>'}};r.directive("ysIcebreakerGame",t)}(angular),function(e){"use strict";var r=function(e,r){function t(e){n.baseUrl=e}function i(e){var t=new Firebase(n.baseUrl+e);return r(t)}function a(r){var t=new Firebase(n.baseUrl+r);return e(t)}var n={};return n.setBaseUrl=t,n.object=i,n.array=a,n};r.$inject=["$firebaseArray","$firebaseObject"],e.module("ys.icebreaker").factory("firebaseService",r)}(angular),function(e,r){"use strict";var t=function(e,t,i,a,n,o){function s(){t.info("initializing icebreaker service..."),g.icebreakers=o.get("icebreakers");var e=a.defer();if(g.icebreakers)e.resolve();else{var r=n.array("Icebreakers");r.$loaded().then(function(){t.info("icebreakers was successfully fetched from firebase"),console.log(r),o.set("icebreakers",r),e.resolve()},function(e){t.warn("icebreakers.json get error",e)})}return e.promise}function c(){var e=o.get("icebreakers");if(e){var a=e.length-1,n=r.floor(r.random()*a+1);if(-1===a)return t.info("All questions are used, game over. Please reset"),i.$broadcast("gameover"),{icebreaker:"No questions left. Please reset."};0===a&&(n=0);var s=e[n];return e.splice(n,1),o.set("icebreakers",e),s}}function l(){var e=a.defer(),r=n.array("Icebreakers");return r.$loaded().then(function(){t.info("Icebreaker was successfully reset. Questions reloaded from file."),o.set("icebreakers",r),e.resolve()},function(e){t.warn("icebreakers.json get error",e)}),e.promise}function u(){return o.get("icebreakers")}function f(e){var r=a.defer(),t={user:"-",icebreaker:e,$id:""},i=n.array("Icebreakers");return i.$loaded().then(function(){i.$add(t).then(function(e){r.resolve()})}),r.promise}function b(e){var r=a.defer(),t=o.get("icebreakers"),i=0;for(i;i<=t.length-1;i++)if(t[i].$id===e){t.splice(i,1);break}o.set("icebreakers",t);var s=n.array("Icebreakers");return s.$loaded().then(function(){var t=s.$indexFor(e);r.resolve(s.$remove(t))}),r.promise}function d(e){var r=o.get("icebreakers");console.log("list",r);var t=r.indexOf(e);console.log("tobe deleted",t,e),r.splice(t,1),o.set("icebreakers",r)}var g={};return g.initIcebreaker=s,g.getRandomIcebreaker=c,g.reset=l,g.getIcebreakers=u,g.addIcebreaker=f,g.removeIcebreaker=b,g.removeIcebreakerLocal=d,g};t.$inject=["$http","$log","$rootScope","$q","firebaseService","store"],e.module("ys.icebreaker").factory("icebreakerService",t)}(angular,Math);