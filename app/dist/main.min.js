!function(){angular.module("ys.icebreaker",["angular-storage","firebase","ngMaterial","ngSanitize","ui.router"])}(),function(e){"use strict";e.module("ys.icebreaker").run(["firebaseService",function(e){var r="https://burning-torch-9438.firebaseio.com/";e.setBaseUrl(r)}])}(angular),function(e,r){"use strict";var t=e.module("ys.icebreaker");t.run(["$http","$log","$mdDialog","icebreakerService","store",function(e,r,t,a,i){var n=a.initIcebreaker();if(n.then(function(){r.info("initialization completed!")}),i.get("user"))r.info("Current user is:",i.get("user"));else{var s=t.prompt().title("You are?").placeholder("Name").ariaLabel("Name").ok("Ok");t.show(s).then(function(e){i.set("user",e),r.info("Current user is: ",e)})}}])}(angular,document),function(){"use strict";var e=angular.module("ys.icebreaker");e.config(["$stateProvider","$urlRouterProvider",function(e,r){r.otherwise("/game"),e.state("game",{url:"/game",template:"<ys-icebreaker-game></ys-icebreaker-game>",controller:"icebreakerGameController"}),e.state("list",{url:"/list",templateUrl:"templates/icebreakerList.html",controller:"icebreakerListController"})}])}(),function(e){"use strict";var r=function(e,r,t,a){t.array("Icebreakers");r.add=function(){a.addIcebreaker(r.icebreaker).then(function(){e.hide()})},r.cancel=function(){e.cancel()}};r.$inject=["$mdDialog","$scope","firebaseService","icebreakerService"],e.module("ys.icebreaker").controller("addIcebreakerController",r)}(angular),function(e,r){"use strict";var t=function(e,r,t,a,i){function n(){a.$broadcast("reset"),i.reset()}a.$on("gameover",function(e){}),a.$on("reset",function(e){var t=r.simple({textContent:"The game was successfully reset.",position:"top right",action:"Dismiss"});r.show(t)}),a.play=function(){var e=i.getRandomIcebreaker();a.icebreaker=e},a.reset=function(r){var t=i.getIcebreakers();if(t.length>0){var a=e.confirm().title("Reset the game?").textContent("There is/are ("+t.length+") question(s) left. Reset?").ariaLabel("Confirm").targetEvent(r).ok("Yes").cancel("No");e.show(a).then(function(){n()},function(){})}else n()}};t.$inject=["$mdDialog","$mdToast","$log","$scope","icebreakerService"],e.module("ys.icebreaker").controller("icebreakerGameController",t)}(angular,$),function(e,r){"use strict";var t=function(e,r,t,a,i,n){function s(){var e=i.array("Icebreakers");e.$loaded().then(function(){a.firebaseIcebreakers=e}),a.icebreakers=n.getIcebreakers()}s(),a.submit=function(){n.addIcebreaker(a.question).then(function(){var e=t.simple({textContent:"The icebreaker was successfully added.",position:"top right",action:"Dismiss"});t.show(e)})},a["delete"]=function(e){var r=e.$id;n.removeIcebreaker(r).then(function(){var e=t.simple({textContent:"The icebreaker was successfully deleted.",position:"top right",action:"Dismiss"});t.show(e)})}};t.$inject=["$log","$mdDialog","$mdToast","$scope","firebaseService","icebreakerService"],e.module("ys.icebreaker").controller("icebreakerListController",t)}(angular,document),function(e){var r=e.module("ys.icebreaker"),t=function(){var e='<div id="side-controls" class="right-align"><a class="btn-floating ys" ng-click="reset($event)"><i class="fa fa-repeat"></i><md-tooltip md-direction="top">Reset</md-tooltip></a><a class="btn-floating ys" ui-sref="list"><i class="fa fa-list-alt"></i><md-tooltip md-direction="top">List</md-tooltip></a><a class="btn-floating ys" ng-href="http://github.com/amcpanaligan/ys.icebreaker" target="_blank"><i class="fa fa-github"></i><md-tooltip md-direction="top">Github</md-tooltip></a></div><div class="container center-align"><div class="row"><div class="col s12 m12"><button class="waves-effect waves-light btn-large ys" ng-click="play()">Play</button><div class="card-panel ys" ng-show="icebreaker"><h2 class="white-text" ng-bind="icebreaker.icebreaker"></h2></div></div></div></div>';return{replace:!1,restrict:"E",template:e}};r.directive("ysIcebreakerGame",t)}(angular),function(e){"use strict";var r=function(e,r){function t(e){n.baseUrl=e}function a(e){var t=new Firebase(n.baseUrl+e);return r(t)}function i(r){var t=new Firebase(n.baseUrl+r);return e(t)}var n={};return n.setBaseUrl=t,n.object=a,n.array=i,n};r.$inject=["$firebaseArray","$firebaseObject"],e.module("ys.icebreaker").factory("firebaseService",r)}(angular),function(e,r){"use strict";var t=function(e,t,a,i,n,s){function o(){t.info("initializing icebreaker service..."),d.icebreakers=s.get("icebreakers");var e=i.defer();if(d.icebreakers)e.resolve();else{var r=n.array("Icebreakers");r.$loaded().then(function(){t.info("icebreakers was successfully fetched from firebase"),console.log(r),s.set("icebreakers",r),e.resolve()},function(e){t.warn("icebreakers.json get error",e)})}return e.promise}function c(){var e=s.get("icebreakers");if(e){var i=e.length-1,n=r.floor(r.random()*i+1);if(-1===i)return t.info("All questions are used, game over. Please reset"),a.$broadcast("gameover"),{icebreaker:"No questions left. Please reset."};0===i&&(n=0);var o=e[n];return e.splice(n,1),s.set("icebreakers",e),o}}function l(){var e=i.defer(),r=n.array("Icebreakers");return r.$loaded().then(function(){t.info("Icebreaker was successfully reset. Questions reloaded from file."),s.set("icebreakers",r),e.resolve()},function(e){t.warn("icebreakers.json get error",e)}),e.promise}function u(){return s.get("icebreakers")}function f(e){var r=i.defer(),t={user:s.get("user"),icebreaker:e,$id:""},a=n.array("Icebreakers");return a.$loaded().then(function(){a.$add(t).then(function(e){r.resolve()})}),r.promise}function b(e){var r=i.defer(),t=s.get("icebreakers"),a=0;for(a;a<=t.length-1;a++)if(t[a].$id===e){t.splice(a,1);break}s.set("icebreakers",t);var o=n.array("Icebreakers");return o.$loaded().then(function(){var t=o.$indexFor(e);r.resolve(o.$remove(t))}),r.promise}var d={};return d.initIcebreaker=o,d.getRandomIcebreaker=c,d.reset=l,d.getIcebreakers=u,d.addIcebreaker=f,d.removeIcebreaker=b,d};t.$inject=["$http","$log","$rootScope","$q","firebaseService","store"],e.module("ys.icebreaker").factory("icebreakerService",t)}(angular,Math);